{"version":3,"file":"static/js/490.542e6cab.chunk.js","mappings":"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","sources":["components/Loader.styled.jsx","components/Loader.jsx","components/LoadMore/LoadMore.jsx","components/SearchMovieList/SearchMovieList.jsx","components/SearchMoviesForm/SearchMoviesForm.jsx","components/pages/Movie.js","services/api.js"],"sourcesContent":["import styled from '@emotion/styled';\nexport const LoaderDiv = styled.div`\n  text-align: center;\n`;\n","import React from 'react';\nimport { RotatingLines } from 'react-loader-spinner';\nimport { LoaderDiv } from './Loader.styled';\n\nconst Loader = () => {\n  return (\n    <LoaderDiv>\n      <RotatingLines\n        strokeColor=\"grey\"\n        strokeWidth=\"5\"\n        animationDuration=\"0.75\"\n        width=\"96\"\n        visible={true}\n      />\n    </LoaderDiv>\n  );\n};\n\nexport default Loader;\n","const LoadMore = ({ onClick }) => {\n  return (\n    <button type=\"button\" onClick={() => onClick()}>\n      Load more\n    </button>\n  );\n};\n\nexport default LoadMore;\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nconst BASE_IMG = `https://image.tmdb.org/t/p/w200`;\n\nconst SearchMovieList = ({ movies }) => {\n  const location = useLocation();\n  return (\n    <>\n      <ul>\n        {movies.map(({ title, id, poster_path }) => (\n          <li key={id}>\n            <Link to={`${id}`} state={{ from: location }}>\n              <img src={`${BASE_IMG}${poster_path}`} alt={title} />\n              {title && title.substring(0, 20)}\n            </Link>\n          </li>\n        ))}\n      </ul>\n    </>\n  );\n};\n\nexport default SearchMovieList;\n","import React from 'react';\n\nconst SearchMoviesForm = ({ handleQuery, queryParam, setPage }) => {\n  const onSearch = e => {\n    const query = e.target.value;\n    const nextParams = query !== '' ? { query } : {};\n    console.log(query);\n    handleQuery(nextParams);\n    // setPage(1);\n  };\n  return (\n    <input\n      type=\"text\"\n      value={queryParam}\n      onChange={onSearch}\n      placeholder=\"Search for a movie\"\n    />\n  );\n};\n\nexport default SearchMoviesForm;\n// const [searchParams, setSearchParams] = useSearchParams();\n","import LoadMore from 'components/LoadMore/LoadMore';\nimport Loader from 'components/Loader';\nimport SearchMovieList from 'components/SearchMovieList/SearchMovieList';\nimport SearchMoviesForm from 'components/SearchMoviesForm/SearchMoviesForm';\nimport React, { useState, useEffect } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport { getSearchMovie } from 'services/api';\n\nconst Movie = () => {\n  const [movies, setMovies] = useState([]);\n  const [queryText, setQueryText] = useSearchParams();\n  const [page, setPage] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [loadMore, setLoadMore] = useState(false);\n\n  const queryParam = queryText.get('query') ?? '';\n  console.log(queryParam);\n  useEffect(() => {\n    if (!queryParam) return setMovies([]);\n    const onSearchMovie = async (querty, page) => {\n      setLoading(true);\n      try {\n        const { results, total_result, total_pages } = await getSearchMovie(\n          querty,\n          page\n        );\n        if (page === 1) {\n          setMovies(results);\n        } else {\n          setMovies(prevMovies => [...prevMovies, results]);\n          setLoadMore(total_pages < Math.ceil(total_result / 20));\n        }\n        setLoadMore(true);\n        setLoading(false);\n      } catch (error) {\n        console.log(error);\n        setError(true);\n        setLoading(true);\n      }\n    };\n    onSearchMovie(queryParam, page);\n  }, [page, queryParam]);\n  useEffect(() => {\n    if (!queryParam) return setLoadMore(false);\n  }, [queryParam]);\n\n  const handleQuery = querry => {\n    setQueryText(querry);\n  };\n  const onClick = () => {\n    setPage(prevPage => prevPage + 1);\n  };\n  return (\n    <section>\n      <div className=\"container\">\n        <SearchMoviesForm\n          handleQuery={handleQuery}\n          queryParam={queryParam}\n          setPage={setPage}\n        />\n        {loading ? (\n          <Loader />\n        ) : (\n          <>\n            {movies.length !== 0 && <h2>Movies: '{queryParam}'</h2>}\n            <SearchMovieList movies={movies} />\n            {loadMore && <LoadMore onClick={onClick} />}\n          </>\n        )}\n        {error && <h1>Error</h1>}\n      </div>\n    </section>\n  );\n};\nexport default Movie;\n","import axios from 'axios';\n\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = '0ae1424e97d66787bf898cb471961190';\naxios.defaults.params = {\n  api_key: API_KEY,\n};\n\nexport const getMovies = async () => {\n  const { data } = await axios.get(`${BASE_URL}/trending/all/day`);\n  return data;\n};\n\nexport const getSearchMovie = async (query, page = 1) => {\n  const { data } = await axios.get(\n    `${BASE_URL}/search/movie?query=${query}&page=${page}`\n  );\n  return data;\n};\n\nexport const getMovieDetails = async id => {\n  const { data } = await axios.get(`${BASE_URL}/movie/${id}`);\n  return data;\n};\n\nexport const getCreditsCastMovie = async id => {\n  const { data } = await axios.get(`${BASE_URL}/movie/${id}/credits?`);\n  return data;\n};\n\nexport const getReviews = async id => {\n  const { data } = await axios.get(`${BASE_URL}/movie/${id}/reviews?`);\n  return data;\n};\n"],"names":["LoaderDiv","styled","strokeColor","strokeWidth","animationDuration","width","visible","onClick","type","movies","location","useLocation","map","title","id","poster_path","to","state","from","src","alt","substring","handleQuery","queryParam","setPage","value","onChange","e","query","target","nextParams","console","log","placeholder","useState","setMovies","useSearchParams","queryText","setQueryText","page","loading","setLoading","error","setError","loadMore","setLoadMore","get","useEffect","onSearchMovie","querty","getSearchMovie","results","total_result","total_pages","prevMovies","Math","ceil","className","querry","Loader","length","prevPage","BASE_URL","axios","api_key","getMovies","data","getMovieDetails","getCreditsCastMovie","getReviews"],"sourceRoot":""}